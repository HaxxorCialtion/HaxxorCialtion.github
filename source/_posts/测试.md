`---
title: Olama多工具调用测试
date: 2024-12-02 06:00:00
cover: assets/af0.jpg
tags:
  - LLM
  - function_calling
  - AI
  - Local
---`

# Ollama工具函数调用测试文档

本文档记录了使用Ollama框架进行本地工具函数并行调用的测试过程和结果。测试使用了Qwen2.5 Coder Tools模型的7B版本。

## 环境配置

- 操作系统: Windows 11
- CPU: Intel i7-13700K
- GPU: NVIDIA RTX 2080 Ti 22GB
- 显存占用: 12GB
- 模型: hhao/qwen2.5-coder-tools:7b (4.7GB)

## 测试工具函数

本测试实现了三个基础工具函数:

1. `calculate_fibonacci(n)`: 计算第n个斐波那契数
2. `calculate_factorial(n)`: 计算n的阶乘
3. `get_timestamp()`: 获取当前时间戳

## 测试结果

### 并行调用测试结果

斐波那契数列计算:
- 第20项: 6,765
- 第50项: 12,586,269,025
- 第100项: 354,224,848,179,261,915,075

阶乘计算:
- 100的阶乘: 9.33262e+157 (完整值已省略)

时间戳:
- 1733089159.7644596

### 错误处理测试结果

输入: 计算-5的阶乘  
返回: `{"error": "Factorial is not defined for negative numbers"}`

## 性能指标

- LLM推理总时间: 2.64秒
- 显存占用: 12GB

## 结论

- 模型能够成功处理多个并行工具函数调用
- 错误处理机制运行正常
- 推理速度表现良好
- 内存占用在合理范围内